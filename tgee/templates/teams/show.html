{% extends "./layout/base.html" %}

{% block content %}
<div class="position-md-relative py-md-6">
  <div class="blur-banner position-relative position-md-absolute">
    <div class="blur-banner-img" style="background-image: url({{ static(team.img) }});"></div>
  </div>
  <div class="container px-0">
    <div class="p-3 position-relative shadow bg-white">

      <i class="fas fa-pencil-alt position-absolute" data-toggle="modal" data-target="#modal_team_edit" style="top: 15px; right: 15px;"></i>

      <div class="d-flex align-items-center flex-column flex-md-row mt-md-0" style="margin-top: -160px;">
        <div class="rounded bg-cover" style="background-image: url({{ static(team.img) }}); width: 219px; height: 219px;"></div>
        <div class="p-3">
          <h3>{{team.name}}</h3>
          <div class="d-flex flex-column flex-md-row">
            <div class="mr-6">
              <p><span class="text-gray-2">聯絡窗口</span><span class="px-2">{{team.author}}</span></p>
              <p><span class="text-gray-2">聯絡電話</span><span class="px-2">{{team.contact}}</span></p>
              <p><span class="text-gray-2">電子郵件</span><span class="px-2">{{team.email}}</span></p>
            </div>
            <div>
              <p><span class="text-gray-2">所在縣市</span><span class="px-2">{{team.city}}</span></p>
              <p><span class="text-gray-2">成立年份</span><span class="px-2">{{team.year}}</span></p>
              <p><span class="text-gray-2">官方網站</span><span class="px-2"> <a href="{{team.site}}">{{team.site}}</a></span></p>
            </div>
          </div>
          <div class="text-center text-gray-2 position-md-absolute" style="right: 15px; bottom: 15px;"><i class="mx-1 fab fa-facebook-f"></i><i class="mx-1 fab fa-instagram"></i><i class="mx-1 fab fa-twitter"></i></div>
        </div>
      </div>
    </div>
    <div class="py-5">
      <div class="only-desktop">
        <div class="js-slick" data-slides-to-show="3">
          {% for img, title, content, tags in team.games %}
          <div class="px-1 py-4" data-toggle="modal" data-target="#modal_game_show">
            <div class="tgee-card bg-cover" style="background-image: url({{ static(img) }}); height: 250px;">
              <div class="p-2 fancy-bg-gradient h-100 d-flex justify-content-between flex-column">
                <div class="d-flex">
                  <span class="badge badge-pill badge-gray-1 mr-auto">恐怖遊戲</span>
                  <span class="badge badge-pill badge-gray-1" data-toggle="modal" data-target="#modal_game_edit">
                    <i class="fas fa-ellipsis-v"></i>
                  </span>
                </div>
                <h3 class="mb-0 text-white">{{title}}</h3>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
        <div class="d-flex justify-content-center align-items-center">
          <div class="next-arrow">
            <div class="tgee-circle-button border-0 shadow"><i class="fas fa-chevron-left"></i></div>
          </div>
          <div class="dots"></div>
          <div class="prev-arrow">
            <div class="tgee-circle-button border-0 shadow"><i class="fas fa-chevron-right"></i></div>
          </div>
        </div>
      </div>
      <div class="only-mobile">
        <div class="js-slick" data-slides-to-show="1">
          {% for img, title, content, tags in team.games %}
          <div class="px-1 py-4">
            <div class="tgee-card bg-cover" style="background-image: url({{ static(img) }}); height: 250px;">
              <div class="p-2 fancy-bg-gradient h-100 d-flex justify-content-between flex-column">
                <div><span class="badge badge-pill badge-gray-1">遊戲新聞</span></div>
                <h3 class="mb-0 text-white">{{title}}</h3>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
        <div class="d-flex justify-content-center align-items-center">
          <div class="next-arrow">
            <div class="tgee-circle-button border-0 shadow"><i class="fas fa-chevron-left"></i></div>
          </div>
          <div class="dots"></div>
          <div class="prev-arrow">
            <div class="tgee-circle-button border-0 shadow"><i class="fas fa-chevron-right"></i></div>
          </div>
        </div>
      </div>
    </div>
    <div class="my-4 p-5 shadow" id="vue-team-reward">
      <h2>團隊介紹</h2>
      <p>{{team.content}}</p>
      <div>
        <div class="d-flex align-items-center">
          <h2 class="mr-auto">獲獎紀錄</h2>
          <div v-if="rewards_editing">
            <span @click="rewards_editing = false">取消</span>
            <span @click="rewards_editing = false">儲存變更</span>
          </div>
          <div v-if="!rewards_editing">
            <span @click="rewards_editing = true">編輯</span>
          </div>
        </div>
        <ul v-if="!rewards_editing">
          <li v-for="r in rewards">[[r]]</li>
        </ul>
        <div v-if="rewards_editing">
          <div class="mt-3 position-relative" v-for="r, idx in rewards">
            <button class="btn-circle btn-primary close-btn" data-dismiss="modal" style="width: 20px; height: 20px;" @click="rewards.splice(idx, 1)">
              <span>&times;</span>
            </button>
            <input class="form-control rounded-0" type="text" :value="r">
          </div>
          <div class="text-center">
            <div class="mx-auto d-inline-block text-center bg-primary text-white rounded-circle" style="width: 25px; height: 25px;" @click="rewards.push('')">
              <i class="fas fa-plus"></i>
            </div>
          </div>
        </div>
      </div>
      <div>
        <div class="d-flex align-items-center">
          <h2 class="mr-auto">相關報導</h2>
          <div v-if="links_editing">
            <span @click="links_editing = false">取消</span>
            <span @click="links_editing = false">儲存變更</span>
          </div>
          <div v-if="!links_editing">
            <span @click="links_editing = true">編輯</span>
          </div>
        </div>
        <ul v-if="!links_editing">
          <li v-for="link in links" class="py-1">
            <a :href="link.href">[[link.text]]</a>
          </li>
        </ul>
        <div v-if="links_editing">
          <div class="mb-2 position-relative" v-for="link, idx in links">
            <button class="btn-circle btn-primary close-btn" data-dismiss="modal" style="width: 20px; height: 20px;" @click="links.splice(idx, 1)">
              <span>&times;</span>
            </button>
            <input class="form-control rounded-0" type="text" :value="link.text">
            <input class="form-control rounded-0" type="text" :value="link.href">
          </div>
          <div class="text-center">
            <div class="mx-auto d-inline-block text-center bg-primary text-white rounded-circle" style="width: 25px; height: 25px;" @click="links.push({text: '', href: ''})">
              <i class="fas fa-plus"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="py-5">
      <div class="only-desktop">
        <div class="js-slick" data-slides-to-show="3">
          {% for img in team.member_images %}
          <div class="px-1 py-4">
            <div class="tgee-card bg-cover" style="background-image: url({{ static(img) }}); height: 250px;"></div>
          </div>
          {% endfor %}
        </div>
        <div class="d-flex justify-content-center align-items-center">
          <div class="next-arrow">
            <div class="tgee-circle-button border-0 shadow"><i class="fas fa-chevron-left"></i></div>
          </div>
          <div class="dots"></div>
          <div class="prev-arrow">
            <div class="tgee-circle-button border-0 shadow"><i class="fas fa-chevron-right"></i></div>
          </div>
        </div>
      </div>
      <div class="only-mobile">
        <div class="js-slick" data-slides-to-show="1">
          {% for img in team.member_images %}
          <div class="px-1 py-4">
            <div class="tgee-card bg-cover" style="background-image: url({{ static(img) }}); height: 250px;"></div>
          </div>
          {% endfor %}
        </div>
        <div class="d-flex justify-content-center align-items-center">
          <div class="next-arrow">
            <div class="tgee-circle-button border-0 shadow"><i class="fas fa-chevron-left"></i></div>
          </div>
          <div class="dots"></div>
          <div class="prev-arrow">
            <div class="tgee-circle-button border-0 shadow"><i class="fas fa-chevron-right"></i></div>
          </div>
        </div>
      </div>
    </div>
    <div class="py-5">
      <h2 class="h1">團隊文章</h2>
      <div class="mobile-scroll-x">
        {% for img, title in news %}
        <div>
          <div class="tgee-card">
            <div class="tgee-card-img" style="background-image: url({{static(img) }});"></div>
            <div class="tgee-card-body">
              <h2>{{title}}</h2>
              <div class="d-flex">
                <div><small class="f-14">1 小時前更新 </small></div>
                <div class="tgee-circle-button f-12"><i class="fas fa-chevron-right"></i></div>
              </div>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
    <div class="py-5">
      <h2 class="h1">其他文章</h2>
      <div class="mobile-scroll-x">
        {% for img, title in news %}
        <div>
          <div class="tgee-card">
            <div class="tgee-card-img" style="background-image: url({{static(img)}});"></div>
            <div class="tgee-card-body">
              <h2>{{title}}</h2>
              <div class="d-flex">
                <div><small class="f-14">1 小時前更新 </small></div>
                <div class="tgee-circle-button f-12"><i class="fas fa-chevron-right"></i></div>
              </div>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
  {% include './partials/modal_game_show.html' %}
  {% include './partials/modal_game_edit.html' %}
  {% include './partials/modal_team_edit.html' %}
</div>
{% endblock %}